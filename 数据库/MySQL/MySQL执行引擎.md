### MySQL中的缓存

MySQL中的缓存是指MySQL的内存中的缓存，包括内存表缓存、内存索引缓存和内存查询缓存等。这些缓存可以加快MySQL的查询性能，但也会占用内存资源。

| 缓存类型         | 层级  | 作用                                 | 配置参数                             |
|--------------|-----|------------------------------------|----------------------------------|
| 查询缓存         | 服务层 | 缓存SQL执行结果集                         | `query_cache_size`（MySQL 5.7-版本存在） |
| 表缓存          | 服务层 | 存储表结构数据                            | 无                                |
| 排序缓存         | 服务层 | 优化排序操作                             | `sort_buffer_size`                 |
| 键缓存(MyISAM)  | 引擎层 | 缓存 MyISAM 表的索引数据，加速索引查找            | `key_buffer_size`                  |
| 缓冲池(InnoDB)  | 引擎层 | 缓存数据页和索引页，实现 “预读” 和 “写缓冲”，大幅减少磁盘访问 | `innodb_buffer_pool_size`          |
| 日志缓冲(InnoDB) | 引擎层 | 缓存 InnoDB 的 redo 日志，减少日志写入磁盘的频率    | `innodb_log_buffer_size`           |

### MySQL存取过程中的缓存

- 读取数据时，先检查缓冲池，命中则直接返回；未命中则从磁盘加载到缓冲池。
- 写入数据时，先更新缓冲池中的页（脏页），再异步刷新到磁盘（通过`innodb_flush_log_at_trx_commit`控制刷盘策略）。

### 执行一条查询SQL请求的过程是什么？
- 客户端向MySQL服务器发送SQL查询语句
- MySQL服务器的**连接器**开始处理这个请求：与客户端**建立连接、获取权限、管理连接**
- MySQL服务器的**解析器**对SQL语句进行解析：对SQL进行词法分析（拆SQL，识别关键字和表名、列名）、语法分析（检查语法规范，并构建抽象语法树）和语义分析（检查表和列是否存在）；